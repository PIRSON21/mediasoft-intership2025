# Функции системы

Нужно сделать http сервис складов и товаров. Реализовать логику поступления товаров на склады и учета аналитики, сколько товаров было продано на каждом складе.

**Сущность: warehouses (Склады)**

Данные:
- идентификатор склада (id)
- адрес склада (address)

Можно добавлять новые склады, получать список (без удаления?)

**Сущность: products (Товары)**

Данные:
- идентификатор товара (id)
- название товара (name)
- описание товара (description)
- характеристики товара (characteristics) в виде структуры ключ-значение
- вес одной единицы товара (weight)
- штрихкод товара (barcode)

Сервису необходимо:
- получать списка всех товаров (без учета склада)
- создавать новые товары
- обновлять существующие товары

**Сущность: inventory (инвентаризация)**

Данные:
- идентификатор товара (product_id)
- идентификатор склада (warehouse_id)
- количество товара на складе (quantity)
- цена товара на складе (price)
- скидка на товар (discount)

Сервису необходимо:
- добавление товара на склад
- изменение количества товара на складе
- создание скидки на товар
- получение списка товаров на складе + пагинация, с информацией о:
    - идентификатор товара
    - название товара
    - цена без скидки
    - цена со скидкой
- получение информации о товаре на складе по идентификатору товара и склада:
    - идентификатор товара
    - название товара
    - описание товара
    - характеристики товара
    - цена без скидки
    - цена со скидкой
    - количество товара на складе
    - штрихкод товара
- получение подсчета (???)
- покупка товара со склада:
    получаем:
        - идентификаторы товара
        - идентификатор склада
        - количество товара
    если товара нет на складе, то возвращаем ошибку

**Сущность: analytics (Аналитика)**

При покупке товара нужно записывать аналитику по каждому складу.

Нужно хранить:
- идентификатор склада (warehouse_id)
- идентификатор товара (product_id)
- количество проданных единиц товара (quantity)
- сумма продаж (total_sales)

Сумма должна быть фактической, то есть с учетом стоимостей товара на момент покупки.

Сервису необходимо:
- вывод аналитика по складу по каждому товару с общей суммой продаж
- вывод топ 10 складов которые сделали больше всего выручки:
    - адрес склада
    - идентификатор склада
    - общая сумма продаж
